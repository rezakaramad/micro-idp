{{- if .Capabilities.APIVersions.Has "keycloak.crossplane.io/v1beta1/ProviderConfig" }}
{{- if .Values.keycloakProvider.enabled }}
apiVersion: keycloak.crossplane.io/v1beta1
kind: ProviderConfig
metadata:
  name: keycloak
  annotations:
    argocd.argoproj.io/sync-wave: "5"
spec:
  credentials:
    source: Secret
    secretRef:
      namespace: crossplane
      name: keycloak-master
      key: credentials
{{- end }}
{{- else }}
{{- printf "Skipping Keycloak ProviderConfig because provider not installed yet" | quote }}
{{- end }}
